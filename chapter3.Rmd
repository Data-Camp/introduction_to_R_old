--- 
title_meta  : Chapter 3
title       : Matrices
description : In this chapter you will learn how to work with matrices in R. By the end of the chapter, you will be able to create matrices and to understand how you can do basic computations with them. You will analyze the box office numbers of Star Wars to illustrate the use of matrices in R. May the force be with you!

--- type:NormalExercise xp:100 skills:1 key:d61aeba84c
## What's a matrix?

In R, a matrix is a collection of elements of the same data type (numeric, character, or logical) arranged into a fixed number of rows and columns. Since you are working with rows and columns, a matrix is called two-dimensional. 

You can construct a matrix in R with the [`matrix()`](http://www.rdocumentation.org/packages/base/functions/matrix) function. This takes a vector, and the number of rows (`nrow`) or the number of columns (`ncol`). In either of the following examples, the result is the same. The output is shown in comments.

```
matrix(1:12, nrow = 3)
matrix(1:12, ncol = 4) # same
##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12
```

Notice that the values are filled in by column. Occasionally it is easier to fill the values by row; you can do this with `byrow = TRUE`.

```
matrix(1:12, nrow = 3, byrow = TRUE)
##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12
```

*** =instructions
* Construct a matrix with 3 rows containing the numbers 1 up to 15 by column.
* Create another matrix containing 1 to 15, this time filled by row.

*** =hint

* In both cases, the first two arguments to `matrix()` are `1:15` and `nrow = 3`.
* To specify the values should be filled by row, pass `byrow = TRUE`.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Construct a matrix with 3 rows containing 1 to 15 by column
matrix(___, nrow = ___)

# Construct a matrix with 3 rows containing 1 to 15 by row

```

*** =solution
```{r}
# Construct a matrix with 3 rows containing 1 to 15 by column
matrix(1:15, nrow = 3)

# Construct a matrix with 3 rows containing 1 to 15 by row
matrix(1:15, nrow = 3, byrow = TRUE)
```

*** =sct
```{r}

test_output_contains(
  "matrix(1:15, nrow = 3)",
  incorrect_msg = "Did you call `matrix()` with `data = 1:15` and `nrow = 3`?"
)
test_output_contains("matrix(1:15, nrow = 3, byrow = TRUE)",
  incorrect_msg = "Did you call `matrix()` with `data = 1:15`, `nrow = 3`, and `byrow = TRUE`?"
)
success_msg("Great! The `matrix` type is an important way of storing data that has rows and columns.")
```


--- type:NormalExercise xp:100 skills:1 key:effc2fb945
## Analyzing matrices, you shall

It is now time to get your hands dirty. In the following exercises you will analyze the box office numbers of the Star Wars franchise. May the force be with you! 

Another way to create a matrix is to take several vectors and bind them together by column, using [`cbind()`](https://www.rdocumentation.org/packages/base/topics/cbind).

For example, here are the side-lengths of four right-angled triangles.

```{r}
triangle1 <- c(3, 4, 5)
triangle2 <- c(5, 12, 13)
triangle3 <- c(7, 24, 25)
triangle4 <- c(8, 15, 17)
cbind(triangle1, triangle2, triangle3, triangle4)
##      triangle1 triangle2 triangle3 triangle4
## [1,]         3         5         7         8
## [2,]         4        12        24        15
## [3,]         5        13        25        17
```

Similarly, you can bind the vectors into a matrix by row using [`rbind()`](https://www.rdocumentation.org/packages/base/topics/rbind).

```{r}
rbind(triangle1, triangle2, triangle3, triangle4)
##           [,1] [,2] [,3]
## triangle1    3    4    5
## triangle2    5   12   13
## triangle3    7   24   25
## triangle4    8   15   17
```

*** =instructions

The box office revenues for the three original Star Wars movies, in millions of USD are defined in the vectors `new_hope`, `empire_strikes`, and `return_jedi`.

- Use `rbind()` to bind the box office results for the three Star Wars movies into a matrix with 3 rows, where each row represents a movie. Name the resulting matrix `star_wars_matrix`.

*** =hint
`rbind(movie1, movie2, movie3)` is a template for the solution.

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Box office Star Wars (in millions of USD)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct star_wars_matrix using rbind()
star_wars_matrix <- 
```

*** =solution
```{r}
# Box office Star Wars (in millions of USD)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct star_wars_matrix using rbind()
star_wars_matrix <- rbind(new_hope, empire_strikes, return_jedi) 
```

*** =sct
```{r}
msg <- "Do not change anything about the box office variables `new_hope`, `empire_strikes` and `return_jedi`!"
test_object("new_hope", undefined_msg = msg, incorrect_msg = msg)
test_object("empire_strikes", undefined_msg = msg, incorrect_msg = msg)
test_object("return_jedi", undefined_msg = msg, incorrect_msg = msg)

test_function("rbind",
              incorrect_msg = "Make sure to correctly specify the arguments you pass to `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")

test_object("star_wars_matrix",
            incorrect_msg = "Did you call `rbind(new_hope, empire_strikes, return_jedi)`?")

success_msg("The force is actually with you! To create a `matrix` from vectors, use `cbind()` or `rbind()`.")
```


--- type:NormalExercise xp:100 skills:1 key:f734e8bf74
## Naming a matrix

To help you remember what is stored in `star_wars_matrix`, you would like to add the names of the movies for the rows. Not only does this help you to read the data, but it is also useful to select certain elements from the matrix. 

Similar to vectors, you can add names for the rows and the columns of a matrix

```
rownames(my_matrix) <- row_names_vector
colnames(my_matrix) <- col_names_vector
```

We went ahead and prepared two vectors for you: `region`, and `titles`. You will need these vectors to name the columns and rows of `star_wars_matrix`, respectively.

*** =instructions

`star_wars_matrix` has been pre-defined for you without any row or column names.

- Use `colnames()` to name the columns of `star_wars_matrix` with the `region` vector.
- Use `rownames()` to name the rows of `star_wars_matrix` with the `titles` vector.
- Print out `star_wars_matrix` to see the result of your work.

*** =hint
You can use `colnames(star_wars_matrix) <- region` to name the columns of `star_wars_matrix`. Do a similar thing to name the rows.

*** =pre_exercise_code
```{r}
# Construct matrix
star_wars_matrix <- rbind(c(460.998, 314.4), c(290.475, 247.900), c(309.306, 165.8))
```

*** =sample_code
```{r}
# Print out star_wars_matrix
star_wars_matrix

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region


# Name the rows with titles


# Print out star_wars_matrix
```

*** =solution
```{r}
# Print out star_wars_matrix
star_wars_matrix

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region
colnames(star_wars_matrix) <- region

# Name the rows with titles
rownames(star_wars_matrix) <- titles

# Print out the updated star_wars_matrix
star_wars_matrix
```

*** =sct
```{r}
msg <- "Don't change the contents of `star_wars_matrix`; only the names of the rows and columns!" 
test_object("star_wars_matrix", incorrect_msg = msg)
msg <- "Don't change anything about the `region` and `titles` vectors that have been defined for you."
test_object("region", undefined_msg = msg, incorrect_msg = msg)
test_object("titles", undefined_msg = msg, incorrect_msg = msg)
test_object("star_wars_matrix", eq_condition = "equal",
            incorrect_msg = "Did you set the row and column names of `star_wars_matrix` correctly? Use `colnames(star_wars_matrix) <- region` for the column names; do a similar thing to name the rows.")
test_output_contains("star_wars_matrix", incorrect_msg = "Don't forget to print out `star_wars_matrix` after you've named the rows and columns.")
success_msg("Laugh it up, fuzzball! You're on the way of becoming an R Jedi! Continue to the next exercise.")
```


--- type:NormalExercise xp:100 skills:1 key:86b87a8545
## How big is the matrix?

It is often useful to know how big your matrix is.  You can determine the number of rows of a matrix using [`nrow()`](http://www.rdocumentation.org/packages/base/functions/nrow).  Similarly, `ncol()` returns the number of columns of a matrix.  [`dim()`](http://www.rdocumentation.org/packages/base/functions/dim) returns a vector of length two, containing the dimension sizes of the matrix.  That is, the number of rows followed by the number of columns. 

In the following example, output is shown in comments.

```
month_matrix <- matrix(month.name, nrow = 3)
nrow(month_matrix)
## [1] 3
ncol(month_matrix)
## [1] 4
dim(month_matrix)
## [1] 3 4
```

*** =instructions
`star_wars_matrix` has been pre-defined for you.

* Print the number of rows of `star_wars_matrix`.
* Print the number of columns of `star_wars_matrix`.
* Print the dimension sizes of `star_wars_matrix`.

*** =hint

* Use `nrow(star_wars_matrix)` to get the number of rows.
* `ncol()` and `dim()` should be called in a similar way to get the number of columns and dimension sizes respectively.

*** =pre_exercise_code
```{r}
# Construct star_wars_matrix
star_wars_matrix <- matrix(
  c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8), 
  nrow = 3, 
  byrow = TRUE,
  dimnames = list(
    c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"), 
    c("US", "non-US")
  )
)
```

*** =sample_code
```{r}
# Print out star_wars_matrix
star_wars_matrix

# Print the number of rows of star_wars_matrix


# Print the number of columns of star_wars_matrix


# Print the dimension sizes of star_wars_matrix

```

*** =solution
```{r}
# Print out star_wars_matrix
star_wars_matrix

# Print the number of rows of star_wars_matrix
nrow(star_wars_matrix)

# Print the number of columns of star_wars_matrix
ncol(star_wars_matrix)

# Print the dimension sizes of star_wars_matrix
dim(star_wars_matrix)
```

*** =sct
```{r}
msg <- "Do not change anything about the preset variable `star_wars_matrix`!"
ex() %>% {
  check_object(., "star_wars_matrix", undefined_msg = msg) %>%
    check_equal(., incorrect_msg = msg)
  check_output_expr(., "nrow(star_wars_matrix)")
  check_output_expr(., "ncol(star_wars_matrix)")
  check_output_expr(., "dim(star_wars_matrix)")
}
success_msg("I never doubted you! Wonderful!");
```



--- type:NormalExercise xp:100 skills:1 key:3fd7499a12
## Calculating the worldwide box office 

The single most important thing for a movie to become legendary in Tinseltown is its worldwide box office figures. 

To calculate the total box office revenue for each of the Star Wars movies, you have to take the sum of the US revenue column and the non-US revenue column. 

In R, the function [`rowSums()`](http://www.rdocumentation.org/packages/base/functions/colSums) conveniently calculates the totals for each row of a matrix. This function creates a new vector:

```
rowSums(my_matrix)
```

Apologies if you tried hard to forget them, but this exercise introduces the Star Wars prequels.

*** =instructions

`star_wars_matrix` and `star_wars_prequels_matrix` have been pre-defined for you.

* Use `rbind()` to combine the data for the two trilogies. Put the prequels on top, and the original movies in the rows underneath.
* Use `rowSums()` to calculate the worldwide box office figures for the six movies and put these in the vector named `worldwide_vector`.

*** =hint

* `rbind(first_matrix, second_matrix)` is a pattern to combine two matrices by row. 
* `rowSums(a_matrix)` will calculate the sum of every row of a matrix.

*** =pre_exercise_code
```{r}
# Construct star wars matrices
star_wars_matrix <- matrix(
  c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8), 
  nrow = 3, 
  byrow = TRUE,
  dimnames = list(
    c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"), 
    c("US", "non-US")
  )
)
star_wars_prequels_matrix <- matrix(
  c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5), 
  nrow = 3, 
  byrow = TRUE,
  dimnames = list(
    c("The Phantom Menace", "Attack of the Clones", "Revenge of the Sith"), 
    c("US", "non-US")
  )
)
```

*** =sample_code
```{r}
# Matrices have been defined for each Star Wars trilogy
star_wars_prequels_matrix
star_wars_matrix

# Combine the data for each trilogy
all_wars_matrix <- 

# Calculate worldwide box office figures
worldwide_vector <- 

# Print the worldwide box office figures

```

*** =solution
```{r}
# Matrices have been defined for each Star Wars trilogy
star_wars_matrix
star_wars_prequels_matrix

# Combine the data for each trilogy
all_wars_matrix <- rbind(star_wars_prequels_matrix, star_wars_matrix)

# Calculate worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Print the worldwide box office figures
worldwide_vector
```

*** =sct
```{r}
predef_msg <- "Do not change anything about the preset variables `star_wars_matrix` and `star_wars_prequels_matrix`!"
rbind_msg <- "Call `rbind()` on `star_wars_prequels_matrix` and `star_wars_matrix` and store the result in `all_wars_matrix`."
rowsum_msg <- "Call `rowSums()` on `all_wars_matrix` and store the result in `worldwide_vector`."

ex() %>% {
  check_object(., "star_wars_matrix", undefined_msg = predef_msg) %>%
    check_equal(., incorrect_msg = predef_msg)
  check_object(., "star_wars_prequels_matrix", undefined_msg = predef_msg) %>%
    check_equal(., incorrect_msg = predef_msg)
  check_object(., "all_wars_matrix", undefined_msg = rbind_msg) %>%
    check_equal(., incorrect_msg = rbind_msg)
  check_object(., "worldwide_vector", undefined_msg = rowsum_msg) %>%
    check_equal(., incorrect_msg = rowsum_msg)
  check_output_expr(., "worldwide_vector")
}
success_msg("Great, kid. Don't get cocky! `rowSums()` calculates the sum of each row of a matrix.")
```



--- type:NormalExercise xp:100 skills:1 key:1bfe5ae096
## Calculating the box office for the entire saga

Just like every [`rbind()`](http://www.rdocumentation.org/packages/base/functions/cbind) has a [`cbind()`](http://www.rdocumentation.org/packages/base/functions/cbind), every [`rowSums()`](http://www.rdocumentation.org/packages/base/functions/colSums) has a [`colSums()`](http://www.rdocumentation.org/packages/base/functions/colSums). 

Let's now calculate the box office revenue over the entire saga for each region.

*** =instructions

`all_wars_matrix` has been pre-defined in your workspace.

- Calculate the total revenue for the US and the non-US region and assign `total_revenue_vector`. You can use the [`colSums()`](http://www.rdocumentation.org/packages/base/functions/colSums) function.
- Print out `total_revenue_vector` to have a look at the results.

*** =hint
You should use the [`colSums()`](http://www.rdocumentation.org/packages/base/functions/colSums) function with `all_wars_matrix` as the argument to find the total box office per region.

*** =pre_exercise_code
```{r}
# all_wars_matrix is stored as a dataset, but it is 1e4 times faster to create it from scratch rather than downloading.
# "http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"
all_wars_matrix <- matrix(
  c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5, 461, 314.4, 290.5, 247.9, 309.3, 165.8),
  nrow = 6, 
  byrow = TRUE,
  dimnames = list(
    c(
      "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith",
      "A New Hope","The Empire Strikes Back","Return of the Jedi"
    ), 
    c("US", "non-US")
  )
)
```

*** =sample_code
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- 
  
# Print out total_revenue_vector
```

*** =solution
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- colSums(all_wars_matrix)

# Print out total_revenue_vector
total_revenue_vector
```

*** =sct
```{r}
msg = "Do not change the contents of `all_wars_matrix`; it was created for you in the workspace."
test_object("all_wars_matrix", eq_condition = "equal", undefined_msg = msg, incorrect_msg = msg)
test_function("colSums", "x", incorrect_msg = "Did you use the `colSums()` function on the all_wars_matrix?")
test_object("total_revenue_vector",
            incorrect_msg = "Have you correctly assigned the result of `colSums(all_wars_matrix)` to `total_revenue_vector`?")
test_output_contains("total_revenue_vector", incorrect_msg = "Don't forget to print out `total_revenue_vector`!")
success_msg("Bellissimo! Head over to the next exercise to learn matrix subsetting.")
```


--- type:NormalExercise xp:100 skills:1 key:41d9d69713
## Selection of matrix elements

Similar to vectors, you can use the square brackets, `[ ]`, to select one or multiple elements from a matrix. Whereas vectors have one dimension, matrices have two dimensions. This means that inside the square brackets you should pass two indexing vectors; these should be separated by a comma.

For example: 

- `my_matrix[1, 2]` selects the element at the first row and second column.
- `my_matrix[1:3, 2:4]` results in a matrix with the data on the rows 1, 2, 3 and columns 2, 3, 4.

If you want to select all elements of a row or a column, no number is needed before or after the comma, respectively:

- `my_matrix[, 1]` selects all elements of the first column.
- `my_matrix[c(1, 3), ]` selects all elements of the first and third rows.

Back to Star Wars with this newly acquired knowledge!

*** =instructions

`all_wars_matrix` has been pre-defined in your workspace.

- Select the non-US revenue for all movies (the entire second column of `all_wars_matrix`), store the result as `non_us_all`.
- Use `mean()` on `non_us_all` to calculate the average non-US revenue for all movies. Simply print out the result.
- This time, select the non-US revenue for the first two movies in `all_wars_matrix`. Store the result as `non_us_some`.
- Use `mean()` again to print out the average of the values in `non_us_some`.

*** =hint
You can select the entire second column of a matrix `my_matrix` with `my_matrix[,2]`.

*** =pre_exercise_code
```{r}
all_wars_matrix <- matrix(
  c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5, 461, 314.4, 290.5, 247.9, 309.3, 165.8),
  nrow = 6, 
  byrow = TRUE,
  dimnames = list(
    c(
      "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith",
      "A New Hope","The Empire Strikes Back","Return of the Jedi"
    ), 
    c("US", "non-US")
  )
)
```

*** =sample_code
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- 
  
# Average non-US revenue

  
# Select the non-US revenue for first two movies
non_us_some <- 
  
# Average non-US revenue for first two movies

```

*** =solution
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- all_wars_matrix[, 2]
  
# Average non-US revenue
mean(non_us_all)
  
# Select the non-US revenue for first two movies
non_us_some <- all_wars_matrix[1:2, 2]
  
# Average non-US revenue for first two movies
mean(non_us_some)
```

*** =sct
```{r}
msg = "Do not change the contents of `all_wars_matrix`; this matrix has already been created for you in the workspace."
test_object("all_wars_matrix", undefined_msg = msg, incorrect_msg = msg)

test_object("non_us_all",
            incorrect_msg = "Did you assign to `non_us_all` the entire second column of `all_wars_matrix`? You can use `[, 2]` to do this!")
test_output_contains("mean(non_us_all)",
                     incorrect_msg = "Have you calculated the average of the values in `non_us_all` by calling `mean(non_us_all)`? Simply print out the result.")
test_object("non_us_some",
            incorrect_msg = "Did you assign to `non_us_some` the non-US revenue for the first two movies? You can use `[1:2,2]` to do this!")
test_output_contains("mean(non_us_some)",
                     incorrect_msg = "Have you calculated the average of the values in `non_us_some` by calling `mean(non_us_some)`? Simply print out the result.")
success_msg("You are nearly at the end of the chapter. Stay on target!")
```



--- type:NormalExercise lang:r xp:100 skills:1 key:bf53de0964
## Selection of matrix elements (2)

For vectors, you learned about three other methods of indexing.

- A vector of negative numbers selects elements to leave out.
- A logical vector returns the elements where the index is `TRUE`.
- A character vector returns elements where the element name matches the index.

These indexing methods can also be used with vectors. This time you need two of them, and you can mix and match.

```{r}
a_matrix[-1, c(2, 4)] # everything except the first row, 2nd and 4th columns
a_matrix[, c(FALSE, TRUE)] # every second column
a_matrix[c("lightsaber", "blaster"), ] # rows named "lightsaber" and "blaster", all columns
```

*** =instructions

`all_wars_matrix` has been pre-defined in your workspace.

* Use negative indexing to select everything except the third row of `all_wars_matrix`.
* Use logical indexing to select the whole of the second column of `all_wars_matrix`.
* Use name indexing to select the row for `The Empire Strikes Back` and the column for the `US` revenues.

*** =hint

* All answers take the form `all_wars_matrix[?, ?]`.
* You can select everything but the _n_th row using `all_wars_matrix[-n, ]`.
* When using logical indexing on columns, the logical vector should (usually) be as long as the number of columns.
* Pass strings to select values by name, for example `all_wars_matrix["a movie", "a region"]`.
* Matching by name is case sensitive.

*** =pre_exercise_code
```{r}
all_wars_matrix <- matrix(
  c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5, 461, 314.4, 290.5, 247.9, 309.3, 165.8),
  nrow = 6, 
  byrow = TRUE,
  dimnames = list(
    c(
      "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith",
      "A New Hope","The Empire Strikes Back","Return of the Jedi"
    ), 
    c("US", "non-US")
  )
)
```

*** =sample_code
```{r}
# Select by negative indexing everything except the third row
all_wars_matrix[___, ]

# Select by logical indexing the second column
all_wars_matrix[, ___]

# Select by names the US box office revenue for The Empire Strikes Back

```

*** =solution
```{r}
# Select by negative indexing everything except the third row
all_wars_matrix[-3, ]

# Select by logical indexing the second column
all_wars_matrix[, c(FALSE, TRUE)]

# Select by names the US box office revenue for The Empire Strikes Back
all_wars_matrix["The Empire Strikes Back", "US"]
```

*** =sct
```{r}
predef_msg <- "Do not change anything about the preset variable `all_wars_matrix`!"
ex() %>% {
  check_object(., "all_wars_matrix", undefined_msg = predef_msg) %>%
    check_equal(., incorrect_msg = predef_msg)
  check_output_expr(., "all_wars_matrix[-3, ]")
  check_output_expr(., "all_wars_matrix[, c(FALSE, TRUE)]")
  check_output_expr(., 'all_wars_matrix["The Empire Strikes Back", "US"]')
}
success_msg("You do have your moments. Not many, but you have them.")
```

--- type:NormalExercise xp:100 skills:1 key:c81c656f06
## A little arithmetic with matrices

The standard operators like `+`, `-`, `/`, `*`, etc. work in an element-wise way on matrices in R. This is the same behavior that you already saw with vectors.

For example, `2 * my_matrix` multiplies each element of `my_matrix` by two.

As a newly-hired data analyst for Lucasfilm, it is your job is to find out how many visitors went to each movie for each geographical area. You already have the total revenue figures in `all_wars_matrix`. Assume that the price of a ticket was 5 dollars. Simply dividing the box office numbers by this ticket price gives you the number of visitors.

*** =instructions

`all_wars_matrix` has been pre-defined in your workspace.

- Divide `all_wars_matrix` by 5, giving you the number of visitors in millions. Assign the resulting matrix to `visitors`.
- Print out `visitors` so you can have a look.

*** =hint

The number of visitors is equal to `all_wars_matrix` divided by 5.

*** =pre_exercise_code
```{r}
all_wars_matrix <- matrix(
  c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5, 461, 314.4, 290.5, 247.9, 309.3, 165.8),
  nrow = 6, 
  byrow = TRUE,
  dimnames = list(
    c(
      "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith",
      "A New Hope","The Empire Strikes Back","Return of the Jedi"
    ), 
    c("US", "non-US")
  )
)
``` 

*** =sample_code
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- 
  
# Print the estimate to the console

```

*** =solution
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- all_wars_matrix / 5

# Print the estimate to the console
visitors
```

*** =sct
```{r}
msg = "Do not change the contents of `all_wars_matrix`; this matrix has already been created for you in the workspace."
test_object("all_wars_matrix", undefined_msg = msg, incorrect_msg = msg)

test_object("visitors",
            incorrect_msg = "It looks like `visitors` is not correct. Simply divide `all_wars_matrix` by 5 and store the resulting matrix as `visitors`.")
test_output_contains("visitors", incorrect_msg = "Don't forget to also print out `visitors` so you can have a look.")
success_msg("Great! What do these results tell you? A staggering 92 million people went to see A New Hope in US theaters! Continue to the next exercise.")
```


--- type:NormalExercise xp:100 skills:1 key:1e0b39d6e9
## A little arithmetic with matrices (2) 

Just like `2 * my_matrix` multiplied every element of `my_matrix` by two, `my_matrix1 * my_matrix2` creates a matrix where each element is the product of the corresponding elements in `my_matrix1` and `my_matrix2`. For example,

```{r}
matrix1 <- matrix(1:6, nrow = 2)
matrix2 <- matrix(7:12, nrow = 2)
matrix1 * matrix2
## [,1] [,2] [,3]
## [1,]    7   27   55
## [2,]   16   40   72
```

After looking at the result of the previous exercise, big boss Lucas points out that the ticket prices went up over time. He asks to redo the analysis based on the prices you can find in `ticket_prices_matrix` (source: imagination).

_Those who are familiar with matrices should note that this is not the standard matrix multiplication for which you should use [`%*%`](https://www.rdocumentation.org/packages/base/topics/matmult) in R._

*** =instructions

`all_wars_matrix` and `ticket_prices_matrix` have been pre-defined in your workspace.

- Divide `all_wars_matrix` by `ticket_prices_matrix` to get the estimated number of US and non-US visitors for the six movies. Assign the result to `visitors`.
- From the `visitors` matrix, select the entire first column, representing the number of visitors in the US. Store this selection as `us_visitors`.
- Calculate the mean number of US visitors per movie; print out the result.

*** =hint
- You can use the function `mean()` to calculate the average of the inputs to the function.
- To get the number of visitors in the US, select the first column from `visitors` using `visitors[ ,1]`.

*** =pre_exercise_code
```{r}
all_wars_matrix <- matrix(
  c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5, 461, 314.4, 290.5, 247.9, 309.3, 165.8),
  nrow = 6, 
  byrow = TRUE,
  dimnames = list(
    c(
      "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith",
      "A New Hope","The Empire Strikes Back","Return of the Jedi"
    ), 
    c("US", "non-US")
  )
)
ticket_prices_matrix <- matrix(
  c(4, 4, 4.5, 4.5, 4.9, 4.9, 5, 5, 6, 6, 7, 7), 
  nrow = 6, 
  byrow = TRUE, 
  dimnames = list(rownames(all_wars_matrix), colnames(all_wars_matrix))
)
```

*** =sample_code
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- 

# US visitors
us_visitors <- 

# Average number of US visitors

```

*** =solution
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- all_wars_matrix / ticket_prices_matrix

# US visitors
us_visitors <- visitors[ ,1]

# Average number of US visitors
mean(us_visitors)
```

*** =sct
```{r}
msg <- "Do not change the contents of `all_wars_matrix`; this matrix has already been created for you in the workspace."
test_object("all_wars_matrix", undefined_msg = msg, incorrect_msg = msg)
msg <- "Do not change the contents of `ticket_prices_matrix`; this matrix has already been created for you in the workspace."
test_object("ticket_prices_matrix", undefined_msg = msg, incorrect_msg = msg)

test_object("visitors",
            incorrect_msg = "Have you correctly created the `visitors` matrix? You should divide `all_wars_matrix` by `ticket_prices_matrix` to get there.")
test_object("us_visitors", incorrect_msg = "To created `us_visitors`, you should correctly select the entire first column from `visitors`. You can use `[,1]` for this!")
test_output_contains("mean(us_visitors)", incorrect_msg = "Once you have created `us_visitors`, you can use `mean()` to calculate the average number of visitors in the US. Make sure to print out the result.")

success_msg("This exercise concludes the chapter on matrices. Only at the end do you realize the power of the Dark Side! Next stop on your journey through the R language: factors.")
```


